$id: "https://cfdl.dev/ontology/behavior/assumption.schema.yaml"
$schema: "http://json-schema.org/draft-07/schema#"
title: "Assumption"
description: "Represents an economic or operational input used in modeling, such as growth rates, default probabilities, or cost escalators."
type: object

properties:
  id:
    type: string
    description: "Unique identifier for the assumption within its scope."

  name:
    type: string
    description: "Optional human-readable name for clarity in reports and user interfaces."

  category:
    type: string
    description: "Logical grouping used for organizing assumptions in reports, sensitivity analysis, and user interfaces."
    enum:
      - revenue
      - expense
      - capital
      - leasing
      - timing
      - financing
      - other

  scope:
    type: string
    description: "Level in the CFDL hierarchy where this assumption is defined and applies."
    enum:
      - component
      - asset
      - deal
      - portfolio
      - fund

  type:
    type: string
    description: "Method by which the value is defined and how it should be evaluated."
    enum:
      - fixed
      - distribution
      - table
      - expression

  value:
    description: "Base value for fixed, table, or expression type assumptions."
    oneOf:
      - type: number
      - type: string
      - type: object

  distribution:
    type: object
    description: "Statistical distribution specification for stochastic modeling."
    properties:
      type:
        type: string
        enum:
          - normal
          - uniform
          - triangular
          - lognormal
          - beta
          - custom
        description: "Type of probability distribution to use for sampling values."
      parameters:
        type: object
        description: "Distribution-specific parameters that define the shape and characteristics of the distribution."
        additionalProperties: true
    required:
      - type
      - parameters

  timeSeries:
    type: array
    description: "Optional overrides that apply at specific times, regardless of assumption type."
    items:
      type: object
      properties:
        date:
          type: string
          format: date
          description: "The date when this override takes effect."
        value:
          description: "The override value that applies on or after the given date."
          oneOf:
            - type: number
            - type: string
            - type: object
      required:
        - date
        - value

  unit:
    type: string
    description: "Optional unit specification (e.g. '%', 'bps', '$/sf')."

  template:
    type: string
    description: "Optional reference to a reusable assumption template."

  overrides:
    type: object
    description: "Field-level overrides when using a referenced template, allowing customization."
    additionalProperties: true

  source:
    type: string
    description: "Optional reference to the data source or authority for the assumption value."

  marketDataRef:
    type: string
    description: "Optional reference to a market data entity for dynamic updates."

  metadata:
    type: object
    description: "Free-form metadata (tags, UI hints)."
    additionalProperties: true

required:
  - id
  - category
  - scope
  - type
  